<!DOCTYPE html>
<html>
<head>
  <title></title>
  <link href='http://fonts.googleapis.com/css?family=Open+Sans:400italic,700italic,400,700' rel='stylesheet' type='text/css'>
  <link rel="stylesheet" href="style.css" />

</head>
<body>

<div id="input">
  <textarea name="content" id="content" />
<h1>This is a Title</h1>
<p>Lorem ipsum dolor sit amet, consectetur adipisicing elit. Neque, obcaecati, eligendi, quae fugit libero nisi quos expedita non sequi voluptas provident dolorem officiis velit commodi labore eaque beatae? Ullam, eum.</p>

[Actions format:table show:own]

  Some Text
  [FormTitle]
  [NonActionField]
  [Description]
  [Due]

[Actions]

<p>
  I want to show this field: [Some Field Name]
</p>
<p>
  There's also a reference field: [A Reference.Inner Field]
</p>

<p>Fin.</p>
  </textarea>
  <input type="button" value="Parse" onclick="parseContent();" />
</div>
<div>
  <textarea name="preview" id="preview" class="hide"></textarea>
  <div class="html-preview" id="html-preview"></div>
  <input type="button" value="Show HTML" onclick="toggleHTML();" />
</div>

  <script src="//cdnjs.cloudflare.com/ajax/libs/mootools/1.4.5/mootools-core-full-compat.min.js"></script>
  <script src="../lib/ReportParser.js"></script>
  <script src="../lib/Parser.js"></script>

  <script src="../lib/ReportPreview.js"></script>
  
  <script>
  function parseContent() {
    if (!window.contentTextArea) {
      window.contentTextArea = document.getElementById('content');
    };
    var c = window.contentTextArea.value;
    var parsed = parser.parse(c);
    $('preview').set('text', parsed);
    $('html-preview').set('html', parsed);
    ReportPreview.preview($('html-preview'));
  }
  function toggleHTML() {
    $('preview').toggleClass('hide');
    $('html-preview').toggleClass('hide');
  }
  </script>
  <script src="../lib/mustache/mustache.js"></script>
  <script type="text/html" id="table-template">
    <table>
      <tr>
        {{#headers}}
          <th>{{.}}</th>
        {{/headers}}
      </tr>
      {{#rows}}
      <tr>
        {{#cells}}
          <td class="{{cssClass}}">{{text}}</td>
        {{/cells}}
      </tr>
      {{/rows}}
    </table>
  </script>
</body>
</html>